{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/how-I-was-able-to-restore-mydatabase-in-MySQL/","webpackCompilationHash":"bfc9e615db5bf5b314ae","result":{"data":{"markdownRemark":{"id":"9286dbf0-fdff-5b54-be04-2ceb4d38d004","html":"<figure>\n    <img src=\"/media/nature-photo7.jpeg\" alt=\"unsplash-film\">\n    <!-- <figcaption>Splendid</figcaption> -->\n</figure>\n<p>Tough times have been passed. I struggled with Ubuntu re-installation because of abnormal NVIDIA graphic issue. I had no choice but to reinstall my Ubuntu. The big issue among many things was I had to backup my MYSQL db since it wasnâ€™t saved on AWS.</p>\n<p>This is how I was able to restore MySQL database from physical files.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. Install mysql-server\n\n    sudo apt-get update\n    sudo apt-get install mysql-server</code></pre></div>\n<p>1.1 If you already installed mysql and have a issue with its root login. Remove it and re-install</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    sudo apt-get remove --purge mysql*\n    sudo apt-get autoremove\n    sudo apt-get autoclean\n    sudo apt-get install mysql-server mysql-client</code></pre></div>\n<ol start=\"2\">\n<li>\n<p>Define mysql root password and other security-related options, including removing remote access to the root user and setting the root password</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo mysql_secure_installation utility</code></pre></div>\n</li>\n<li>\n<p>If you can not access mysql, then enter below commend line.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo mysql\nor\n$ sudo mysql root</code></pre></div>\n<h2 id=\"4-from-now-ready-to-restore-mysql-database\"><a href=\"#4-from-now-ready-to-restore-mysql-database\" aria-label=\"4 from now ready to restore mysql database permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. From now, ready to restore MySQL database</h2>\n</li>\n</ol>\n<h3 id=\"step-0-enter-the-root\"><a href=\"#step-0-enter-the-root\" aria-label=\"step 0 enter the root permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 0. Enter the root.</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo -i</code></pre></div>\n<h3 id=\"step-1-shutdown-mysql-server\"><a href=\"#step-1-shutdown-mysql-server\" aria-label=\"step 1 shutdown mysql server permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1. Shutdown Mysql server</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# **service mysql stop**</code></pre></div>\n<h3 id=\"step-2-copy-database-in-your-database-folder-in-linux-the-default-location-is-varlibmysql-keep-same-name-of-the-database-and-same-name-of-database-in-mysql-mode\"><a href=\"#step-2-copy-database-in-your-database-folder-in-linux-the-default-location-is-varlibmysql-keep-same-name-of-the-database-and-same-name-of-database-in-mysql-mode\" aria-label=\"step 2 copy database in your database folder in linux the default location is varlibmysql keep same name of the database and same name of database in mysql mode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2. Copy database in your database folder (in linux, the default location is /var/lib/mysql). Keep same name of the database, and same name of database in mysql mode.</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# cp -rf /home/jeon/Desktop/wecode/mysql/django_database_essentials/ /var/lib/mysql/</code></pre></div>\n<h3 id=\"step-3-change-own-and-change-mode-the-folder\"><a href=\"#step-3-change-own-and-change-mode-the-folder\" aria-label=\"step 3 change own and change mode the folder permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3. Change own and change mode the folder:</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# chown -R mysql:mysql /var/lib/mysql/django_database_essentials/\nroot@jeon-15UB470-KP7SKN:~# chmod -R 660 /var/lib/mysql/django_database_essentials/\nroot@jeon-15UB470-KP7SKN:~# chown mysql:mysql /var/lib/mysql/django_database_essentials/\nroot@jeon-15UB470-KP7SKN:~# chmod 700 /var/lib/mysql/django_database_essentials/</code></pre></div>\n<h3 id=\"step-4-copy-ibdata1-in-your-database-folder\"><a href=\"#step-4-copy-ibdata1-in-your-database-folder\" aria-label=\"step 4 copy ibdata1 in your database folder permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4. Copy ibdata1 in your database folder</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# cp /home/jeon/Desktop/wecode/mysql/ibdata1 /var/lib/mysql/\nroot@jeon-15UB470-KP7SKN:~# chown mysql:mysql /var/lib/mysql/ibdata1</code></pre></div>\n<h3 id=\"step-5-copy-iblogfile0-and-iblogfile1-files-in-your-database-folder\"><a href=\"#step-5-copy-iblogfile0-and-iblogfile1-files-in-your-database-folder\" aria-label=\"step 5 copy iblogfile0 and iblogfile1 files in your database folder permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 5. copy ib<em>logfile0 and ib</em>logfile1 files in your database folder.</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# cp /home/jeon/Desktop/wecode/mysql/ib_logfile0 /var/lib/mysql/\nroot@jeon-15UB470-KP7SKN:~# cp /home/jeon/Desktop/wecode/mysql/ib_logfile1 /var/lib/mysql/</code></pre></div>\n<h3 id=\"step-6-remember-change-own-and-change-root-of-those-files\"><a href=\"#step-6-remember-change-own-and-change-root-of-those-files\" aria-label=\"step 6 remember change own and change root of those files permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 6. Remember change own and change root of those files:</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@jeon-15UB470-KP7SKN:~# chown -R mysql:mysql /var/lib/mysql/ib_logfile0\nroot@jeon-15UB470-KP7SKN:~# chown -R mysql:mysql /var/lib/mysql/ib_logfile1</code></pre></div>\n<h3 id=\"step-7-start-your-mysql-server-everything-come-back-and-enjoy-it\"><a href=\"#step-7-start-your-mysql-server-everything-come-back-and-enjoy-it\" aria-label=\"step 7 start your mysql server everything come back and enjoy it permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 7. Start your Mysql server. Everything come back and enjoy it.</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql -u root -p\nenter password\nmysql&gt;&gt; show databases;</code></pre></div>\n<p><strong>References:</strong> </p>\n<p><a href=\"https://biolinh.wordpress.com/2017/04/01/restoring-mysql-database-from-physical-files-debianubuntu/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://biolinh.wordpress.com/2017/04/01/restoring-mysql-database-from-physical-files-debianubuntu/</a></p>\n<hr>\n<blockquote>\n<p><strong>We are creating wealth every time we write a code</strong></p>\n</blockquote>","fields":{"slug":"/posts/how-I-was-able-to-restore-mydatabase-in-MySQL/","tagSlugs":["/tag/database/","/tag/my-sql/","/tag/ubuntu/"]},"frontmatter":{"date":"2019-09-02T19:35:11.199Z","description":"This is how I was able to restore MySQL database from physical files.","tags":["DATABASE","MySQL","UBUNTU"],"title":"[MySQL] How I was able to restore my database in MYSQL after Ubuntu installation"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/how-I-was-able-to-restore-mydatabase-in-MySQL/"}}}